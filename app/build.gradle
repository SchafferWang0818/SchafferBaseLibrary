apply plugin: 'com.android.application'
//apply plugin: 'realm-android'
apply from: 'tinker-support.gradle'
apply plugin: 'org.greenrobot.greendao'

android {
    flavorDimensions "applicationId"
    compileSdkVersion rootProject.ext.android.compileSdkVersion
    buildToolsVersion rootProject.ext.android.buildToolsVersion
    dexOptions {
        javaMaxHeapSize "4g"
    }
    defaultConfig {
        applicationId "com.schaffer.base"
        minSdkVersion rootProject.ext.android.minSdkVersion
        targetSdkVersion rootProject.ext.android.targetSdkVersion
        versionCode rootProject.ext.android.versionCode
        versionName rootProject.ext.android.versionName
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
        multiDexEnabled true
        manifestPlaceholders = [UMENG_CHANNEL_VALUE: "tencent"]
        //5.0以下兼容SVG
        vectorDrawables.useSupportLibrary = true
        ndk {
            // 设置支持的SO库架构
            abiFilters 'armeabi',
                    'x86',
                    'armeabi-v7a'//,
//                    'x86_64',
//                    'arm64-v8a',
//                    'x86',
//                    'mips',
//                    'mips64'
        }
    }
    signingConfigs {
        config {
            try {
                storeFile file('C:/jks/kjb.jks')
                storePassword 'k123456'
                keyAlias 'kjb'
                keyPassword 'k123456'
            } catch (ex) {
                throw new InvalidUserDataException(ex.toString())
            }
        }
        debug_config {
            try {
                storeFile file('C:/jks/kjb.jks')
                storePassword 'k123456'
                keyAlias 'kjb'
                keyPassword 'k123456'
            } catch (ex) {
                throw new InvalidUserDataException(ex.toString())
            }
        }
    }
    buildTypes {
        release {
            signingConfig signingConfigs.config

            buildConfigField "boolean", "LOG_DEBUG", "false"
            zipAlignEnabled true
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
        debug {
            buildConfigField "boolean", "LOG_DEBUG", "true"
            versionNameSuffix "-debug"
            minifyEnabled false
            zipAlignEnabled false
            shrinkResources false
            signingConfig signingConfigs.debug_config
        }
    }
    sourceSets {
        main {
            jniLibs.srcDirs = ['libs']
            //保证gradle可以找到与aidl相对应的java文件
            java.srcDirs = ['src/main/java']
        }
    }
    lintOptions {
        checkReleaseBuilds false     //在打包Release版本的时候进行(多语言等)检测
        abortOnError false              //打包报错是否停止打包
    }
    productFlavors {
//        mainflavor {}
        tencent {}
//        ali {}
//        qh360 {}
//        xiaomi {}
//        meizu {}
//        huawei {}
//        oppo {}
//        vivo {}
//        wandoujia {}
        baidu {}
        productFlavors.all { flavor ->
            flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name]
        }
    }
}

//数据库版本配置
greendao {
    schemaVersion rootProject.ext.android.greendaoVersion  //对应当前数据库版本
    daoPackage 'com.schaffer.base.db.model'  //由GreenDao自动生成代码所在的包名，默认的是在项目包下面新建一个gen。
    targetGenDir 'src/main/java' //设置自动生成代码的目录。
}

dependencies {
//    implementation fileTree(include: ['*.jar'], dir: 'libs')
    //noinspection GradleCompatible
    androidTestImplementation 'com.android.support.test:runner:1.0.1'
    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'
    testImplementation 'junit:junit:4.12'
    implementation rootProject.ext.dependencies["appcompat-v7"]
    implementation rootProject.ext.dependencies["constraint"]
    implementation rootProject.ext.dependencies["design"]
    implementation rootProject.ext.dependencies["recyclerview"]
    implementation rootProject.ext.dependencies["multidex"]
    implementation rootProject.ext.dependencies["retrofit"]
    implementation rootProject.ext.dependencies["retrofit-converter"]
    implementation rootProject.ext.dependencies["retrofit-adapter"]
    implementation rootProject.ext.dependencies["okhttp"]
    implementation rootProject.ext.dependencies["okhttp-logging"]
    implementation rootProject.ext.dependencies["rxandroid"]
    implementation rootProject.ext.dependencies["rxjava"]
    implementation rootProject.ext.dependencies["gson"]
    implementation rootProject.ext.dependencies["glide"]
    implementation rootProject.ext.dependencies["circleimageview"]
    implementation rootProject.ext.dependencies["banner"]
    implementation rootProject.ext.dependencies["eventbus"]
    implementation rootProject.ext.dependencies["xlhratingbar_lib"]
    implementation rootProject.ext.dependencies["pickerview"]
    implementation rootProject.ext.dependencies["buglyupgrade"]
    implementation rootProject.ext.dependencies["buglynative"]
    implementation rootProject.ext.dependencies["okhttputils"]
    implementation rootProject.ext.dependencies["airbnbLottie"]
    implementation rootProject.ext.dependencies["greendao"]
    implementation "android.arch.lifecycle:extensions:1.1.0"
//    implementation 'com.android.support:support-v4:'+rootProject.ext.android.supportVersion
//    debugImplementation rootProject.ext.dependencies["leak"]
//    releaseImplementation rootProject.ext.dependencies["leak_no"]
}
